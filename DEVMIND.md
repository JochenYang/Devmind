# DevMind MCP - é¡¹ç›®åˆ†ææ–‡æ¡£

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

**DevMind MCP** æ˜¯ä¸€ä¸ªåŸºäº Model Context Protocol (MCP) çš„æ™ºèƒ½ä¸Šä¸‹æ–‡æ„ŸçŸ¥è®°å¿†ç³»ç»Ÿï¼Œä¸ºAIåŠ©æ‰‹æä¾›æŒä¹…åŒ–è®°å¿†èƒ½åŠ›ã€‚è¯¥é¡¹ç›®é€šè¿‡è‡ªåŠ¨ç›‘æ§å¼€å‘æ´»åŠ¨ã€æ™ºèƒ½è¯­ä¹‰æœç´¢å’Œæœ¬åœ°å­˜å‚¨ï¼Œå®ç°è·¨å¯¹è¯çš„ä¸Šä¸‹æ–‡è®°å¿†å’Œæ™ºèƒ½æ£€ç´¢ã€‚

### æ ¸å¿ƒä»·å€¼

- **è‡ªåŠ¨è®°å¿†**: åå°ç›‘æ§æ–‡ä»¶å˜æ›´å’ŒGitæ“ä½œ
- **æ™ºèƒ½æœç´¢**: åŸºäºå‘é‡åµŒå…¥çš„è¯­ä¹‰æœç´¢ï¼Œç†è§£ä»£ç å«ä¹‰
- **100%ç§æœ‰**: æ‰€æœ‰æ•°æ®æœ¬åœ°å­˜å‚¨åœ¨SQLiteä¸­ï¼Œæ— äº‘ç«¯ä¼ è¾“
- **å®æ—¶å“åº”**: å¼€å‘è¿‡ç¨‹ä¸­è®°å½•ï¼Œå³æ—¶æ£€ç´¢
- **è·¨å·¥å…·æ”¯æŒ**: ä¸Claude Desktopã€Cursorç­‰MCPå®¢æˆ·ç«¯æ— ç¼åä½œ

## ğŸ› ï¸ å¼€å‘å‘½ä»¤

### åŸºæœ¬æ„å»ºå’Œæµ‹è¯•
```bash
# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼ï¼ˆç›‘å¬æ–‡ä»¶å˜åŒ–ï¼‰
npm run dev

# ç”Ÿäº§æ„å»º
npm run build

# è¿è¡Œæµ‹è¯•
npm test

# ä»£ç æ£€æŸ¥
npm run lint
```

### è¿è¡Œå’Œéƒ¨ç½²
```bash
# å¯åŠ¨MCPæœåŠ¡å™¨
npm start

# è¿è¡ŒCLIå·¥å…·
npm run cli

# å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹
npm run daemon
```

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

### ç³»ç»Ÿæ¶æ„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AI Assistant  â”‚â”€â”€â”€â”€â”‚   DevMind MCP   â”‚â”€â”€â”€â”€â”‚  SQLite Storage â”‚
â”‚   (MCP Client)  â”‚    â”‚     Server      â”‚    â”‚   (Local DB)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
    MCP Protocol          Context Processing        Persistent Data
    Communications        & Vector Search            Management
```

### æ ¸å¿ƒç»„ä»¶

#### 1. MCPæœåŠ¡å™¨å±‚ (`mcp-server.ts`)
- **èŒè´£**: MCPåè®®å¤„ç†ã€è¯·æ±‚è·¯ç”±ã€ä¼šè¯ç®¡ç†
- **ç‰¹æ€§**: 13ä¸ªMCPå·¥å…·æ”¯æŒã€è‡ªåŠ¨æ–‡ä»¶ç›‘æ§ã€æ™ºèƒ½ä¸Šä¸‹æ–‡è®°å½•
- **å…³é”®ç±»**: `AiMemoryMcpServer`

#### 2. æ•°æ®åº“å±‚ (`database.ts`)
- **èŒè´£**: SQLiteæŒä¹…åŒ–å­˜å‚¨ã€æ•°æ®æ¨¡å‹ç®¡ç†
- **ç‰¹æ€§**: å…¨æ–‡æœç´¢ç´¢å¼•ã€å‘é‡åµŒå…¥å­˜å‚¨ã€å¤–é”®çº¦æŸ
- **å…³é”®ç±»**: `DatabaseManager`

#### 3. å‘é‡æœç´¢å¼•æ“ (`vector-search.ts`)
- **èŒè´£**: è¯­ä¹‰æœç´¢ã€å‘é‡åµŒå…¥ç”Ÿæˆ
- **ç‰¹æ€§**: æ··åˆæœç´¢ï¼ˆå…³é”®è¯+è¯­ä¹‰ï¼‰ã€æœ¬åœ°æ¨¡å‹æ¨ç†
- **å…³é”®ç±»**: `VectorSearchEngine`

#### 4. ä¼šè¯ç®¡ç†å™¨ (`session-manager.ts`)
- **èŒè´£**: ä¼šè¯ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€é¡¹ç›®å…³è”
- **ç‰¹æ€§**: è‡ªåŠ¨ä¼šè¯æ¿€æ´»ã€é¡¹ç›®ä¸»ä¼šè¯ç®¡ç†
- **å…³é”®ç±»**: `SessionManager`

#### 5. å†…å®¹å¤„ç†æ¨¡å—
- **å†…å®¹æå–å™¨** (`content-extractor.ts`): ä»£ç åˆ†æã€è¯­è¨€æ£€æµ‹
- **è´¨é‡è¯„ä¼°å™¨** (`content-quality-assessor.ts`): å†…å®¹è´¨é‡è¯„åˆ†
- **è‡ªåŠ¨è®°å½•è¿‡æ»¤å™¨** (`auto-record-filter.ts`): æ™ºèƒ½å»é‡å’Œè¿‡æ»¤

#### 6. é¡¹ç›®ç´¢å¼•å™¨ (`project-indexer/`)
- **èŒè´£**: æ™ºèƒ½é¡¹ç›®åˆ†æã€æ–‡æ¡£ç”Ÿæˆ
- **ç‰¹æ€§**: å¤šè¯­è¨€æ–‡æ¡£ç”Ÿæˆã€å®‰å…¨æ‰«æã€å†…å­˜ä¼˜åŒ–
- **å…³é”®ç»„ä»¶**: `ProjectMemoryOptimizer`, `SmartIndexingStrategy`

## ğŸ”§ æ ¸å¿ƒç»„ä»¶

### æ•°æ®åº“æ¨¡å‹

#### Projectsè¡¨
- `id`: é¡¹ç›®å”¯ä¸€æ ‡è¯†
- `name`: é¡¹ç›®åç§°
- `path`: é¡¹ç›®è·¯å¾„ï¼ˆå”¯ä¸€ï¼‰
- `language`: ä¸»è¦ç¼–ç¨‹è¯­è¨€
- `framework`: æ¡†æ¶ä¿¡æ¯
- `metadata`: JSONæ ¼å¼å…ƒæ•°æ®

#### Sessionsè¡¨
- `id`: ä¼šè¯å”¯ä¸€æ ‡è¯†
- `project_id`: å…³è”é¡¹ç›®ID
- `name`: ä¼šè¯åç§°
- `status`: çŠ¶æ€ï¼ˆactive/completed/pausedï¼‰
- `tool_used`: ä½¿ç”¨å·¥å…·ï¼ˆvscode/cliç­‰ï¼‰

#### Contextsè¡¨
- `id`: ä¸Šä¸‹æ–‡å”¯ä¸€æ ‡è¯†
- `session_id`: å…³è”ä¼šè¯ID
- `type`: ä¸Šä¸‹æ–‡ç±»å‹ï¼ˆcode/documentation/solutionç­‰ï¼‰
- `content`: å†…å®¹æ–‡æœ¬
- `file_path`: å…³è”æ–‡ä»¶è·¯å¾„
- `embedding`: å‘é‡åµŒå…¥ï¼ˆBLOBï¼‰
- `quality_score`: è´¨é‡è¯„åˆ†

### MCPå·¥å…·é›†

DevMindæä¾›13ä¸ªMCPå·¥å…·å’Œ4ä¸ªä¸“ä¸šæç¤ºï¼Œåˆ†ä¸ºä»¥ä¸‹ç±»åˆ«ï¼š

#### ä¼šè¯ç®¡ç†
- `create_session`: åˆ›å»ºå¼€å‘ä¼šè¯
- `get_current_session`: è·å–å½“å‰ä¼šè¯
- `end_session`: ç»“æŸä¼šè¯
- `delete_session`: åˆ é™¤ä¼šè¯ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰

#### ä¸Šä¸‹æ–‡æ“ä½œ
- `record_context`: è®°å½•å¼€å‘ä¸Šä¸‹æ–‡
- `list_contexts`: åˆ—å‡ºæ‰€æœ‰ä¸Šä¸‹æ–‡
- `delete_context`: åˆ é™¤ç‰¹å®šä¸Šä¸‹æ–‡
- `update_context`: æ›´æ–°ä¸Šä¸‹æ–‡å†…å®¹
- `extract_file_context`: ä»æ–‡ä»¶æå–ä¸Šä¸‹æ–‡

#### æœç´¢ä¸å‘ç°
- `semantic_search`: AIé©±åŠ¨çš„è¯­ä¹‰æœç´¢
- `get_related_contexts`: æŸ¥æ‰¾ç›¸å…³ä¸Šä¸‹æ–‡
- `generate_embeddings`: ç”Ÿæˆå‘é‡åµŒå…¥

#### å†…å­˜ä¼˜åŒ–
- `optimize_project_memory`: ä¼˜åŒ–å†…å­˜å­˜å‚¨å’Œæ€§èƒ½

#### ä¸“ä¸šæç¤º

- `context_summary`: ç”Ÿæˆé¡¹ç›®ä¸Šä¸‹æ–‡æ‘˜è¦
- `code_explanation`: ç”Ÿæˆä»£ç è§£é‡Š
- `solution_recommendation`: è·å–è§£å†³æ–¹æ¡ˆæ¨è
- `project_analysis_engineer`: ä¸“ä¸šé¡¹ç›®åˆ†æå·¥ç¨‹å¸ˆæç¤º

### å‘é‡æœç´¢ç³»ç»Ÿ

#### åµŒå…¥æ¨¡å‹
- **é»˜è®¤æ¨¡å‹**: `Xenova/all-MiniLM-L6-v2`
- **ç»´åº¦**: 384ç»´
- **ç›¸ä¼¼åº¦é˜ˆå€¼**: 0.5
- **æ··åˆæƒé‡**: 0.7ï¼ˆè¯­ä¹‰vså…³é”®è¯ï¼‰

#### æœç´¢æµç¨‹
1. **å…³é”®è¯æœç´¢**: ä½¿ç”¨SQLite FTS5å…¨æ–‡æœç´¢
2. **è¯­ä¹‰æœç´¢**: è®¡ç®—æŸ¥è¯¢ä¸ä¸Šä¸‹æ–‡çš„ä½™å¼¦ç›¸ä¼¼åº¦
3. **æ··åˆæ’åº**: ç»“åˆå…³é”®è¯å’Œè¯­ä¹‰å¾—åˆ†
4. **ç»“æœè¿”å›**: æŒ‰ç›¸å…³æ€§æ’åºçš„ä¸Šä¸‹æ–‡åˆ—è¡¨

## ğŸ’¡ é‡è¦å®ç°ç»†èŠ‚

### è‡ªåŠ¨æ–‡ä»¶ç›‘æ§

```typescript
// æ™ºèƒ½æ–‡ä»¶ç›‘æ§å™¨é…ç½®
const watcher = watch(patterns, {
  cwd: projectPath,
  ignored: ['**/node_modules/**', '**/.git/**'],
  persistent: true,
  ignoreInitial: true,
  awaitWriteFinish: {
    stabilityThreshold: 2000, // æ–‡ä»¶å†™å…¥ç¨³å®šå2ç§’å†è§¦å‘
    pollInterval: 100
  }
});
```

### æ™ºèƒ½ä¸Šä¸‹æ–‡è®°å½•

ç³»ç»Ÿé€šè¿‡ä»¥ä¸‹æœºåˆ¶é¿å…é‡å¤è®°å½•ï¼š
- **æ—¶é—´é—´éš”è¿‡æ»¤**: 30ç§’å†…åŒä¸€æ–‡ä»¶åªè®°å½•ä¸€æ¬¡
- **å†…å®¹é•¿åº¦è¿‡æ»¤**: 50-50,000å­—ç¬¦èŒƒå›´
- **æ–‡ä»¶ç±»å‹è¿‡æ»¤**: æ”¯æŒç‰¹å®šæ‰©å±•å
- **è´¨é‡è¯„ä¼°**: åŸºäºå†…å®¹å¤æ‚åº¦å’Œç»“æ„è¯„åˆ†

### å¤šè¯­è¨€æ–‡æ¡£ç”Ÿæˆ

é¡¹ç›®åˆ†æå·¥ç¨‹å¸ˆæ”¯æŒä¸­è‹±æ–‡æ–‡æ¡£ç”Ÿæˆï¼š
- **è‡ªåŠ¨æ£€æµ‹**: åŸºäºREADMEå†…å®¹æ£€æµ‹è¯­è¨€
- **æ‰‹åŠ¨æŒ‡å®š**: é€šè¿‡languageå‚æ•°æŒ‡å®š
- **ä¸“ä¸šæœ¯è¯­**: æŠ€æœ¯æœ¯è¯­çš„ä¸­æ–‡è§£é‡Š

## âš™ï¸ é…ç½®

### åŸºç¡€é…ç½®

åˆ›å»º `.devmind.json` æ–‡ä»¶ï¼š

```json
{
  "database_path": "~/.devmind/memory.db",
  "max_contexts": 1000,
  "search_limit": 20,
  "auto_cleanup": true,
  "vector_dimensions": 1536,
  "vector_search": {
    "enabled": true,
    "model_name": "Xenova/all-MiniLM-L6-v2",
    "similarity_threshold": 0.5,
    "hybrid_weight": 0.7
  }
}
```

### MCPå®¢æˆ·ç«¯é…ç½®

```json
{
  "mcpServers": {
    "devmind": {
      "command": "npx",
      "args": ["-y", "devmind-mcp@latest"]
    }
  }
}
```

## ğŸ“ å¼€å‘ç¬”è®°

### æŠ€æœ¯æ ˆ
- **è¯­è¨€**: TypeScript
- **è¿è¡Œæ—¶**: Node.js â‰¥ 18.0.0
- **æ•°æ®åº“**: SQLite (better-sqlite3)
- **å‘é‡æ¨¡å‹**: Transformers.js (Xenova)
- **æ–‡ä»¶ç›‘æ§**: Chokidar
- **æ„å»ºå·¥å…·**: TypeScript Compiler

### æ€§èƒ½ä¼˜åŒ–

#### æ•°æ®åº“ä¼˜åŒ–
- **å…¨æ–‡æœç´¢ç´¢å¼•**: FTS5è™šæ‹Ÿè¡¨
- **å‘é‡ç´¢å¼•**: åµŒå…¥ç‰ˆæœ¬å’Œæ¨¡å‹ç´¢å¼•
- **å¤–é”®çº¦æŸ**: çº§è”åˆ é™¤
- **æœ¬åœ°æ—¶é—´æ ¼å¼åŒ–**: å‡å°‘é‡å¤è®¡ç®—

#### å†…å­˜ä¼˜åŒ–
- **æ™ºèƒ½ç¼“å­˜**: å‘é‡åµŒå…¥ç¼“å­˜
- **æ‰¹é‡å¤„ç†**: åµŒå…¥ç”Ÿæˆæ‰¹å¤„ç†
- **æ‡’åŠ è½½**: æ¨¡å‹æŒ‰éœ€åŠ è½½

### å®‰å…¨è€ƒè™‘
- **æœ¬åœ°å­˜å‚¨**: æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°
- **æ•æ„Ÿæ–‡ä»¶è¿‡æ»¤**: è‡ªåŠ¨æ’é™¤.envã€å¯†é’¥æ–‡ä»¶
- **å†…å®¹æ¸…ç†**: ç§»é™¤å¯†ç ã€ä»¤ç‰Œã€ä¸ªäººè·¯å¾„
- **æƒé™æ§åˆ¶**: æ–‡ä»¶ç³»ç»Ÿè®¿é—®é™åˆ¶

## ğŸ”„ å¸¸è§å¼€å‘ä»»åŠ¡

### æ·»åŠ æ–°MCPå·¥å…·

1. **å®šä¹‰å·¥å…·æ¥å£** (`types.ts`)
```typescript
export interface NewToolParams {
  param1: string;
  param2?: number;
}
```

2. **æ³¨å†Œå·¥å…·** (`mcp-server.ts`)
```typescript
{
  name: 'new_tool',
  description: 'New tool description',
  inputSchema: {
    type: 'object',
    properties: {
      param1: { type: 'string' },
      param2: { type: 'number' }
    },
    required: ['param1']
  }
}
```

3. **å®ç°å¤„ç†å‡½æ•°**
```typescript
private async handleNewTool(args: NewToolParams) {
  // å·¥å…·å®ç°é€»è¾‘
}
```

### æ‰©å±•å‘é‡æœç´¢

1. **é€‰æ‹©æ–°æ¨¡å‹**: åœ¨é…ç½®ä¸­æŒ‡å®šæ–°æ¨¡å‹
2. **æ›´æ–°åµŒå…¥ç»´åº¦**: è°ƒæ•´å‘é‡ç»´åº¦è®¾ç½®
3. **æ€§èƒ½æµ‹è¯•**: éªŒè¯æ–°æ¨¡å‹çš„å‡†ç¡®æ€§å’Œæ€§èƒ½

### è‡ªå®šä¹‰å†…å®¹æå–

1. **æ‰©å±•ContentExtractor**: æ·»åŠ æ–°çš„å†…å®¹åˆ†æé€»è¾‘
2. **æ›´æ–°è´¨é‡è¯„ä¼°**: è°ƒæ•´è´¨é‡è¯„åˆ†ç®—æ³•
3. **æµ‹è¯•éªŒè¯**: ç¡®ä¿æ–°æå–é€»è¾‘çš„å‡†ç¡®æ€§

## ğŸš€ éƒ¨ç½²å’Œåˆ†å‘

### NPMå‘å¸ƒ
```bash
# æ„å»ºé¡¹ç›®
npm run build

# å‘å¸ƒåˆ°NPM
npm publish
```

### æœ¬åœ°å¼€å‘
```bash
# é“¾æ¥åˆ°å…¨å±€
npm link

# åœ¨é¡¹ç›®ä¸­ä½¿ç”¨
npx -y devmind-mcp@latest
```

### ç‰ˆæœ¬ç®¡ç†
- **è¯­ä¹‰åŒ–ç‰ˆæœ¬**: éµå¾ªsemverè§„èŒƒ
- **å˜æ›´æ—¥å¿—**: ç»´æŠ¤CHANGELOG.md
- **å‘å¸ƒæµç¨‹**: è‡ªåŠ¨åŒ–æ„å»ºå’Œæµ‹è¯•

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### å­˜å‚¨æ€§èƒ½
- **ä¸Šä¸‹æ–‡æ•°é‡**: æ”¯æŒæ•°åƒä¸ªä¸Šä¸‹æ–‡
- **æœç´¢å“åº”æ—¶é—´**: < 100msï¼ˆå…³é”®è¯æœç´¢ï¼‰
- **è¯­ä¹‰æœç´¢æ—¶é—´**: < 500msï¼ˆåŒ…å«æ¨¡å‹åŠ è½½ï¼‰
- **æ•°æ®åº“å¤§å°**: ä¼˜åŒ–å‹ç¼©å­˜å‚¨

### å†…å­˜ä½¿ç”¨
- **æ¨¡å‹å†…å­˜**: ~100MBï¼ˆé»˜è®¤æ¨¡å‹ï¼‰
- **è¿è¡Œæ—¶å†…å­˜**: ~200MBï¼ˆåŒ…å«æ•°æ®åº“ï¼‰
- **ç¼“å­˜ä¼˜åŒ–**: æ™ºèƒ½å†…å­˜ç®¡ç†

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### å‘é‡æœç´¢ä¸å¯ç”¨
- **æ£€æŸ¥é…ç½®**: ç¡®ä¿vector_search.enabled=true
- **æ¨¡å‹ä¸‹è½½**: é¦–æ¬¡ä½¿ç”¨éœ€è¦ä¸‹è½½æ¨¡å‹
- **å†…å­˜æ£€æŸ¥**: ç¡®ä¿æœ‰è¶³å¤Ÿå†…å­˜åŠ è½½æ¨¡å‹

#### æ–‡ä»¶ç›‘æ§å¤±è´¥
- **æƒé™æ£€æŸ¥**: ç¡®ä¿æœ‰æ–‡ä»¶ç³»ç»Ÿè®¿é—®æƒé™
- **è·¯å¾„éªŒè¯**: æ£€æŸ¥é¡¹ç›®è·¯å¾„æ˜¯å¦æ­£ç¡®
- **ä¾èµ–ç¡®è®¤**: ç¡®ä¿chokidaræ­£ç¡®å®‰è£…

#### æ•°æ®åº“è¿æ¥é—®é¢˜
- **æ–‡ä»¶æƒé™**: ç¡®ä¿æ•°æ®åº“æ–‡ä»¶å¯å†™
- **ç£ç›˜ç©ºé—´**: æ£€æŸ¥å­˜å‚¨ç©ºé—´
- **è¿æ¥æ± **: é‡å¯åº”ç”¨é‡ç½®è¿æ¥

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼š
```bash
DEBUG=devmind* npx -y devmind-mcp@latest
```

---

**DevMind MCP** - ä¸ºAIåŠ©æ‰‹æä¾›æ™ºèƒ½è®°å¿†èƒ½åŠ›çš„å¼ºå¤§å·¥å…·ï¼Œè®©å¼€å‘æ›´æ™ºèƒ½ã€æ›´é«˜æ•ˆï¼

*æœ€åæ›´æ–°: 2025-10-14*  